
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>键盘事件</title>
    <!-- 引入Vue-->
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!--
        
    -->
    <!-- 准备好一个容器 -->
    <!-- <div id="root">
        <h2>欢迎来到{{name}}学习</h2>
        
    </div> -->

    <script type="text/javascript">
        let data = {
            name:'尚硅谷',
            address:'北京',
        }

        // let tmp = '尚硅谷'
        // setInterval(()=>{
        //     if(data.name !== tmp){
        //         tmp = data.name
        //         console.log('name被修改了')
        //     }
        // },100);

        // Object.defineProperty(data,'name',{
        //     get(){
        //         return data.name
        //     },
        //     set(val){
        //         data.name=val
        //     }
        // })
        
        // 创建一个监视的实例对象，用于监视data中属性的变化
        const obs = new Observer(data)
        console.log(obs)

        //准备一个vm实例对象
        let vm = {}
        vm._data = data = obs

        function Observer(obj){
            // 汇总对象中所有的属性形成一个数组
            const keys = Object.keys(obj)
            // 遍历
            keys.forEach((k)=>{
                Object.defineProperty(this,k,{
                    get(){
                        return obj[k]
                    },
                    set(val){
                        console.log(`${k}被修改了，我要去解析模板，生成虚拟DOM...`)
                        obj[k] = val
                    }
                })
            })
        }
    </script>
</body>

<!-- <script type="text/javascript">
    Vue.config.productionTip = false // 阻止 vue 在启动时生成生产提示。

    new Vue({
        el:'#root',
        data:{
            name:'尚硅谷'
        },
        methods:{
            showInfo(event){
                // console.log(this) // 此处的this是vm
                // console.log(event.target.innerText)
                alert('同学你好!')
            },
        }
    })
</script> -->
</html>